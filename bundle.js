!function(e){var t={};function n(r){if(t[r])return t[r].exports;var u=t[r]={i:r,l:!1,exports:{}};return e[r].call(u.exports,u,u.exports,n),u.l=!0,u.exports}n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{configurable:!1,enumerable:!0,get:r})},n.r=function(e){Object.defineProperty(e,"__esModule",{value:!0})},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=5)}([function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();var u=document.querySelector(".view-stub__log"),a=new(function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}return r(e,[{key:"write",value:function(e){var t=document.createElement("div");t.innerHTML=e,u.appendChild(t)}},{key:"delete",value:function(){u.innerHTML=""}}]),e}());t.default=a},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),u=function(e){return e&&e.__esModule?e:{default:e}}(n(0));var a=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.callbacks={},this.id=1}return r(e,[{key:"register",value:function(e){u.default.write("1.1. Этап инициализации: Store регистрирует callback в Dispatcher."),this.callbacks["id_"+this.id++]=e}},{key:"dispatch",value:function(e){var t=this;u.default.write("5. Dispatcher отправляет тип действия и данные в Store"),Object.keys(this.callbacks).forEach(function(n){t.callbacks[n](e)})}}]),e}();t.default=new a},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),u=function(e){return e&&e.__esModule?e:{default:e}}(n(0));var a=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.observers=[]}return r(e,[{key:"subscribe",value:function(e){u.default.write("1.2. Этап инициализации: Осуществляется подписка на изменения в Store."),this.observers.push(e)}},{key:"unsubscribe",value:function(e){this.observers=this.observers.filter(function(t){return t!==e})}},{key:"broadcast",value:function(e){u.default.write("8. Срабатывает callback, который передали на этапе инициализации, с переданными данными."),this.observers.forEach(function(t){return t(e)})}}]),e}();t.default=a},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),u=i(n(2)),a=i(n(1)),o=i(n(0));function i(e){return e&&e.__esModule?e:{default:e}}var c=new(function(e){function t(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var e=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return e.state=[],e}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,u.default),r(t,[{key:"emitChange",value:function(){o.default.write("7. Состояние Store изменилось. Уведомляются все подписчики."),this.broadcast(this.state)}},{key:"getState",value:function(){return o.default.write("Получение актуального состояния Store"),this.state}}]),t}());a.default.register(function(e){switch(e.type){case"ADD_DATA":o.default.write("6. Store меняет свое состояние"),c.state=[].concat(function(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}(c.state),[e.content]),c.emitChange();break;case"DELETE_DATA":o.default.write("6. Store меняет свое состояние"),c.state=[],c.emitChange()}}),t.default=c},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),u=o(n(1)),a=o(n(0));function o(e){return e&&e.__esModule?e:{default:e}}var i=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}return r(e,[{key:"addData",value:function(e){a.default.write("4. Action форматирует данные в нужном формате и отправляет в Dispatcher"),u.default.dispatch({type:"ADD_DATA",content:e})}},{key:"deleteData",value:function(){a.default.write("4. Action форматирует данные в нужном формате и отправляет в Dispatcher"),u.default.dispatch({type:"DELETE_DATA"})}}]),e}();t.default=new i},function(e,t,n){"use strict";var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();n(10);var u=i(n(4)),a=i(n(3)),o=i(n(0));function i(e){return e&&e.__esModule?e:{default:e}}var c=document.querySelector(".button_server"),l=document.querySelector(".button_store"),f=document.querySelector(".button_log"),s=document.querySelector(".view-stub__input"),d=document.querySelector(".view-stub__label");(new(function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}return r(e,[{key:"initialize",value:function(){var e=this;c.addEventListener("click",function(){o.default.write("2. Пользователь отправляет данные"),e.sendData(s.value),s.value=""}),l.addEventListener("click",function(){o.default.write("2. Пользователь удаляет Store"),e.deleteData()}),f.addEventListener("click",function(){o.default.delete()}),a.default.subscribe(this.onChangeStore)}},{key:"validateData",value:function(e){return e.length}},{key:"sendData",value:function(e){this.validateData(e)?(o.default.write("3. Данные из View отправлены в Action"),u.default.addData(e)):o.default.write("3. Данные из View не прошли валидацию")}},{key:"deleteData",value:function(){o.default.write("3. Пользовательское действие отправлено в Action"),u.default.deleteData()}},{key:"onChangeStore",value:function(e){o.default.write("9. Происходит перерисовка данных"),o.default.write("________________________________"),d.innerHTML=e.join("<br/>")}}]),e}())).initialize()},,,,,function(e,t){}]);